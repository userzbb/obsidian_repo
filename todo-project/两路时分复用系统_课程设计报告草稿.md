---
created: 2026-01-04T00:00:00+08:00
modified: 2026-01-05T16:09:06+08:00
---

# 两路时分复用（PCM + 帧同步 + HDB3 + AWGN）系统设计报告（草稿）

> 本文档为“可直接继续补写”的草稿骨架，已按给定章节安排组织，并把你的 [两路时分复用系统.md](两路时分复用系统.md) 中的关键流程与参数固化到对应位置。
>
> 本文不再使用 Mermaid 流程图，统一改用你提供的 PNG。`img/` 内仍有部分随机哈希文件名，后续会在你补齐其余图片后统一重命名并更新引用。

---

## 二．背景与意义

### 2.1 研究背景

语音基带信号（0~3.4 kHz）在长距离传输时更适合以数字形式进入通信链路，因此需要完成从模拟话音到数字比特流的端到端转换。PCM 编码通过抽样、量化与编码把话音数字化，使后续的交换、复用、差错控制与存储更易实现。在传输侧，为了提高信道利用率并提供稳定的同步结构，系统采用时分复用（TDM）把多路信息按照固定时隙组织成帧；同时使用 HDB3 线路编码抑制直流分量、限制连续 0 的长度，从而改善时钟恢复与传输可靠性。

### 2.2 课题意义

本课题以“PCM 编码/译码 + TDM 帧结构 + 位同步/帧同步 + HDB3 编译码 + AWGN 信道”为主线，把抽样定理、量化与编码、同步机制与线路编码等关键理论落实到可运行的系统链路中，从整体上形成对数字通信系统工程实现的端到端认识。与此同时，通过在 MATLAB/Simulink 中完成系统级仿真，并给出 HDB3 的 Verilog 硬件实现与仿真验证，可以把软件建模与硬件可实现性联系起来，满足课程设计对综合能力的要求。

---

## 三．设计方案

### (一) 总体方案

#### 3.1 系统总体结构

系统发送端以话音基带信号为输入，先经抗混叠低通滤波后以 8 kHz 进行采样保持，并完成 8 bit PCM 编码。随后将 PCM 码字与 8 bit 帧同步码按照固定时隙组成 16 bit 帧结构，完成时分复用并串行化输出，最后进行 HDB3 线路编码以满足传输与同步需求。信道采用 AWGN 高斯白噪声模型用于评估噪声影响。接收端依次完成 HDB3 译码、位同步/时钟恢复、帧同步检测与锁定，再将复用比特流解复用得到 PCM 码字并译码，经重构滤波后恢复话音输出。

#### 3.2 系统流程图（PNG）

![图3-1 系统总体结构与主要时序关系（PCM + TDM + HDB3 + AWGN）](img/1.png)

_图 3-1 系统总体结构与主要时序关系（PCM + TDM + HDB3 + AWGN）_

#### 3.3 关键参数与速率关系（建议写法）

-   话音带宽为 0~3.4 kHz。
-   采样率取 $f_s = 8\,\text{kHz}$，对应采样周期 $T_s = 125\,\mu s$。
-   PCM 采用 8 bit 码字表示每个采样值。
-   帧结构为 16 bit，其中前 8 bit 为帧同步码，后 8 bit 为 PCM 码字。
-   帧率与采样率一致，为 8 kHz。
-   复用后以串行形式在线路上传输，其线路比特率为

$$
R_b = f_{frame} \times bits\_per\_frame = 8\,\text{kHz} \times 16 = 128\,\text{kbps}
$$

-   位周期为 $T_b = 1/R_b = 7.8125\,\mu s$。

> 图位（待补）系统时序示意图，展示帧时钟、位时钟与时隙计数器的波形对齐关系。

### (二) 各部分方案

> 这一节建议用“模块目标 + 输入输出 + 关键参数 + Simulink 实现要点”写法，每块 1~2 页即可。

#### 3.4 PCM 编码/译码方案（要求 1）

PCM 编码/译码模块用于将单路模拟话音信号转换为二进制码流，并在接收端完成正确还原。发送端的编码过程依次包括抗混叠滤波、8 kHz 采样保持、量化以及 8 bit 编码；接收端则将码字映射回量化电平，并通过重构低通滤波恢复话音波形。

在 Simulink 中可以使用下列模块完成该链路的搭建。

-   话音源可选 Sine Wave（用于功能测试）或 Audio File Read（用于真实语音）。
-   抗混叠滤波采用低通滤波器，截止频率约为 3.4 kHz。
-   采样保持使用 Zero-Order Hold，采样周期设置为 $T_s=125\,\mu s$。
-   量化与编码可采用 Quantizer，并按需要加入 A-Law Compressor，再通过 Integer to Bit Converter 输出比特。
-   译码端通过 Bit to Integer Converter 与查表译码恢复电平，并用 Reconstruction LPF 完成重构。

> 图位（待补）PCM 编码/译码子系统框图，建议放置 Simulink 截图。

#### 3.5 帧同步码 + 时分复用方案（要求 2）

系统采用固定 8 bit 的帧同步码（例如 `11100101`），并将同步码与 PCM 码字以固定时隙组织成一帧。具体复用时，TS0 放置同步码的 8 个比特，TS1 放置 PCM 的 8 个比特，发送顺序始终保持“先同步、后 PCM”，从而为接收端提供明确的帧边界判据。

在实现上，可以用位时钟驱动的“时隙计数器 0..15”来决定当前输出比特的来源，并用帧时钟在每帧起始对计数器复位。计数值位于 0..7 时输出同步码对应位，计数值位于 8..15 时输出 PCM 码字对应位；同时在帧起始对 PCM 码字进行锁存，避免帧内比特取值发生漂移。

> 图位（待补）TDM 复用输出帧格式波形，体现 16 bit 帧的周期性重复。

#### 3.6 HDB3 编码/译码方案（要求 3、5）

HDB3 线路编码的目的在于限制长 0 串、抑制直流分量，并改善接收端时钟恢复条件。其基本思想是将数据“1”用交替极性的双极性脉冲表示；当出现 `0000` 的连续 0 串时，按照规则用 `B00V` 或 `000V` 进行替代，其中 V 为破坏脉冲，用于打破极性交替规律以实现直流平衡。

在软件仿真中可以通过 MATLAB Function Block 或自建状态机实现编码与译码逻辑；硬件实现部分在“四（三）硬件实现（HDB3 部分 verilog 实现）”中给出。

> 图位（待补）HDB3 编码波形示例，展示 p/n 双极性脉冲与替代段。

#### 3.7 AWGN 信道方案（要求 4）

信道部分采用高斯白噪声（AWGN）模型，用于模拟传输过程中随机噪声对码型与误码性能的影响。仿真时可以选择以 SNR 或 Eb/N0 作为可调参数，并在需要时结合噪声功率谱密度 $N_0/2$ 进行说明。在码率固定为 $R_b=128\,kbps$ 的条件下，使用 Eb/N0 扫描通常更便于绘制与对比 BER 曲线。

> 图位（待补）AWGN 模块参数设置截图。

#### 3.8 位同步与帧同步方案（要求 6）

位同步（Clock Recovery）的目标是从接收码型中恢复位时钟，使采样点尽可能落在码元中心，从而减小判决误差。软件实现可以采用 Early-Late Gate、PLL，或通信工具箱提供的 Timing Recovery 模块（视软件环境而定）。若本次系统级仿真由统一的理想时钟驱动，也应在报告中明确说明仿真假设，同时给出可实现的位同步电路思路与关键流程。

帧同步（Frame Sync）的目标是在连续比特流中检测同步码并锁定帧边界。实现时可以使用 8 位移位寄存器对接收比特进行滑动观测，并与同步码做比较或相关检测；当命中同步码后复位时隙计数器，进入锁定状态，以保证后续解复用按正确的帧起点进行。

> 图位（待补）帧同步检测波形，包含相关峰值、命中信号与时隙计数器复位过程。

### (三) 设计流程

本系统按“先保证单模块正确、再逐步串联、最后在噪声下评估性能”的思路推进。首先完成 PCM 编码与译码链路的搭建，通过已知测试信号验证抽样率、量化位数与重构滤波的设置能够得到合理的输出；在此基础上加入帧同步码与时隙组织逻辑，确保每帧 16 bit 的结构稳定输出，并能够在接收端通过同步码重新找到帧边界。随后将复用后的串行比特流接入 HDB3 编码与译码模块，重点检查连续 0 替代、极性交替与回溯修正等规则是否在长数据流中一致生效。完成端到端无噪声联通后，再引入 AWGN 信道并逐步提高噪声强度，依次观察关键波形、眼图开口变化与误码率曲线，从而形成对系统时序、同步与抗噪性能的完整验证链路。

---

## 四．设计与实现

### (一) 发送端电路

#### 4.1 发送端功能分解

发送端以模拟话音信号作为输入，经过编码与复用后输出 HDB3 编码的双极性信号（或其等效表示），作为进入信道的线路码型。

#### 4.2 PCM 编码实现

本系统采样率设置为 $f_s=8\,kHz$，采样保持周期为 $T_s=125\,\mu s$，量化与编码位数取 8 bit。

> 图位（待补）发送端 PCM 编码模块的 Simulink 截图。

#### 4.3 帧同步与 TDM 复用实现

帧同步码选用 `11100101`，并通过 0..15 的时隙计数器完成一帧 16 bit 的时隙组织。关键时序要求在每帧起始锁存 PCM 码字，同时复位位计数器，保证帧内取位一致且边界清晰。

> 图位（待补）TDM 复用子系统的 Simulink 截图。

#### 4.4 HDB3 编码实现

-   HDB3 编码器逻辑流程（状态机/判决逻辑）如图 4-1 所示。

![图4-1 HDB3 编码器流程图](img/2.png)

_图 4-1 HDB3 编码器流程图_

---

### (二) 接收端电路

#### 4.5 HDB3 译码实现

-   HDB3 译码器逻辑流程（含 B00V 回溯修正）如图 4-2 所示。

![图4-2 HDB3 译码器流程图](img/3.png)

_图 4-2 HDB3 译码器流程图_

#### 4.6 位同步设计

-   给出采用的实现方式（理想时钟/算法模块/自建 PLL），并说明采样点选择。

> 图位（待补）位同步前后采样点对比，或 Timing Error 曲线。

#### 4.7 帧同步检测与解复用

同步码检测采用长度为 8 的移位寄存器，并以 `11100101` 作为匹配模板。检测到同步码后复位时隙计数器并进入锁定状态；后续可根据误码情况补充丢锁判据与重捕获策略。解复用阶段按照 0..15 的时隙序列将 TS0 与 TS1 分离，其中 TS1 进入串并转换后送入 PCM 解码模块。

> 图位（待补）帧同步锁定信号与时隙计数器复位波形。

#### 4.8 PCM 译码与话音重构

-   Bit to Integer → PCM 解码（查表/逆 A-Law）→ Reconstruction LPF（fc≈3.4 kHz）

> 图位（待补）输入话音与输出话音波形叠加对比。

---

### （三）硬件实现（HDB3 部分 verilog 实现）

> 本节建议放你已完成的 Verilog 工程结构与仿真结果说明。

#### 4.9 Verilog 模块结构

Verilog 工程包含测试数据源 `gen_data`/`gen_data_fixed`、HDB3 编码器 `hdb3_enc`、HDB3 译码器 `hdb3_dec` 以及仿真测试平台 `tb_hdb3`，用于完成端到端功能验证。

#### 4.10 关键状态量与逻辑说明（建议写法）

编码/译码逻辑中需要维护若干关键状态量，包括上一有效脉冲极性的记录、从上次 V 脉冲以来的脉冲奇偶性、用于检测 `0000` 的 4 位滑动窗口，以及触发替代后对后续 3 位处理的计数状态。这些状态量共同保证替代规则与回溯修正能够在连续比特流中稳定工作。

> 图位（待补）Vivado 波形截图（data_orig / hdb3_p / hdb3_n / data_decoded）。

---

## 五．结果与分析

### 5.1 波形观察与相关性分析（要求 7）

在无噪声或低噪声条件下，应对比输入话音（或基带 PCM 译码输出）与最终恢复话音，给出时域波形叠加结果，并在条件允许时给出相关系数等量化指标。同时需要展示 HDB3 编码前后的码型差异，重点说明双极性脉冲、V 脉冲以及连续 0 被替代打破等特征。

> 图位（待补）输入/输出波形对比图。

### 5.2 眼图（要求 7）

眼图的观测点建议选在 HDB3 编码后的线路信号（进入判决前）以及 HDB3 译码前的接收信号（含噪声）两处。随着 SNR 或 Eb/N0 增大，眼图张开程度应逐步提升；反之，噪声与抖动会导致眼图闭合并引起判决裕量下降。

> 图位（待补）不同 SNR/EbN0 下的眼图对比。

### 5.3 误码率 BER 曲线测量（要求 7）

误码率曲线建议以 Eb/N0 为自变量进行扫描（也可选用 SNR），并以 HDB3 译码后的比特流与发送端对应比特流进行对比统计。输出结果采用半对数坐标绘制 BER-Eb/N0 曲线，便于观察不同噪声强度下的误码性能变化。

> 图位（待补）BER 曲线图。

### 5.4 软件/硬件实现说明（要求 8）

软件部分需要说明 SystemView 或 MATLAB/Simulink 的实现方式、主要模块清单以及关键参数设置。硬件部分需要说明 HDB3 编码/译码 Verilog 的功能验证结论，并给出可上板实现的扩展思路与接口约束。

---

## 附录 A（图表清单，用于对照与后续重命名）

建议先查看总览图（带编号与文件名），用于快速对照各图片的内容与引用位置。

-   img/\_gallery.png

当前 `img/` 目录包含以下文件。

-   img/1.png
-   img/2.png
-   img/3.png
-   img/180d8c3a09f41a36853ce51fa2280ced.png
-   img/2df30538f41e9895904468bc4ad6aa22.png
-   img/4ff044e32456e6136545e769d0805afe.png
-   img/aae36c761e93249938a903d6750a427e.png
-   img/d8e8433d60be36657518b8b230f48f69.png
-   img/df5dfd8cb9631fdcbe61e3016163d446.png
-   img/e63e1cc3064bb789ed1d48d4004576b7.png
-   img/e88df09c066e742ff0496ac683e30acf.png

以下图片的含义已确认，可直接用于正文引用。

-   img/1.png 对应系统总体结构流程图，可作为图 3-1 引用。
-   img/2.png 对应 HDB3 编码器流程图，可作为图 4-1 引用。
-   img/3.png 对应 HDB3 译码器流程图，可作为图 4-2 引用。

以下图片的含义仍待确认。你后续补齐说明后，我会统一完成重命名并把图片插入到对应小节，同时更新文内引用。

-   img/d8e8433d60be36657518b8b230f48f69.png 疑似为“匹配滤波后抽样/判决”相关截图，建议用于 4.6 位同步/判决。
-   img/e63e1cc3064bb789ed1d48d4004576b7.png 疑似为“含 AWGN、眼图、误码率统计”的链路截图，建议用于 5.2 与 5.3。
-   其余哈希名 PNG 可能涵盖 PCM 编码链路、PCM 译码链路、HDB3 Simulink 子系统与系统顶层连接等内容，分别可用于 4.2、4.8、4.4 与 5.x。

在确认图片内容后，建议采用统一命名规范，便于管理与引用。

-   `img/tx_pcm_encoder.png`
-   `img/tx_tdm_frame_format.png`
-   `img/tx_hdb3_waveform.png`
-   `img/rx_hdb3_decoder.png`
-   `img/frame_sync_detector.png`
-   `img/bit_sync_timing_recovery.png`
-   `img/eye_diagram_ebn0_XXdB.png`
-   `img/ber_curve.png`

> 你只需要说明每张现有图片分别对应什么内容（例如眼图、BER 曲线或 Simulink 总体框图），我就能在不新增内容的前提下完成重命名并替换文内引用。
